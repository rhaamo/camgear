{% extends "layout.jinja2" %}

{% block content %}
    <div class="row">
        <div class="col-lg-10"><h3>{{ gettext("%(username)s's accessories", username=user.username()) }}</h3></div>
        <div class="col-lg-2 text-lg-right">
            {% if current_user.is_authenticated and user == current_user %}
                <a class="btn btn-primary btn-sm" href="{{ url_for('bp_users.edit') }}">{{ gettext("Edit profile") }}</a>
            {% endif %}
        </div>
    </div>

    <div class="row">
        <div class="col-lg-10">
            <a href="{{ url_for("bp_users.cameras", name=user.name) }}">Cameras</a> ({{ cameras_count }}) | <a href="{{ url_for("bp_users.lenses", name=user.name) }}">Lenses</a> ({{ lenses_count }}) | <a href="{{ url_for("bp_users.accessories", name=user.name) }}">Accessories</a> ({{ accessories_count }})
        </div>
    </div>

    <br />

    <div class="row">
        <div class="col-lg-12">
            <table class="table table-sm table-stripped table-bordered">
                <tr>
                    <th>Picture</th>
                    <th>{{ gettext("Manufacturer") }}</th>
                    <th>{{ gettext("Model") }}</th>
                    <th>{{ gettext("State") }}</th>
                    {% if current_user.is_authenticated and user == current_user %}
                        <th>{{ gettext("Actions") }}</th>
                    {% endif %}
                </tr>
                {% for accessory in accessories %}
                    <tr>
                        <td rowspan="2" width="210px">
                            {% if accessory.pic_filename %}<img src="/uploads/pictures/{{ accessory.pic_filename | thumbnail('200x200', crop='aaa', quality=90) }}">{% endif %}
                        </td>
                        <td>{% if accessory.private %}<i class="fa fa-lock" aria-hidden="true"></i> {% endif %}{{ accessory.manufacturer }}</td>
                        <td>{% if accessory.private %}<i class="fa fa-lock" aria-hidden="true"></i> {% endif %}{{ accessory.model }}</td>
                        <td>{{ accessory.state_str() }}</td>
                        {% if current_user.is_authenticated and user == current_user %}
                            <td>
                                <a href="{{ url_for("bp_accessories.edit", accessory_id=accessory.id) }}"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></a>
                                <a href="{{ url_for("bp_accessories.delete", accessory_id=accessory.id) }}" class="delete_link"><i class="fa fa-trash" aria-hidden="true"></i></a>
                            </td>
                        {% endif %}
                    </tr>
                    <tr>
                        <td colspan="10">Description: {{ accessory.description }}</td>
                    </tr>
                {% endfor %}
            </table>

        </div>
    </div>
{% endblock %}
